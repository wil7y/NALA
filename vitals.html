<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulaire</title>
    <link rel="icon" type="image/png" href="img 3.webp.jpg">
</head>
<style>
:root {
  --bg-image: url("img3.webp");
  --accent: #00bfff;
  --glass: rgba(18,18,18,0.85);
  --text: #fff;
  --input-bg: rgba(255,255,255,0.05);
  --input-border: rgba(255,255,255,0.3);
  --success: #4CAF50;
  --error: #FF5252;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Inter', sans-serif;
  background-image: var(--bg-image);
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  color: var(--text);
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 50px 10px;
  min-height: 100vh;
}

.form-section {
  width: 100%;
  max-width: 400px;
  background: var(--glass);
  border-radius: 20px;
  padding: 30px;
  backdrop-filter: blur(12px);
  box-shadow: 0 0 30px rgba(0,191,255,0.5);
  position: relative;
  overflow: hidden;
}

h2 {
  text-align: center;
  font-size: 1.6rem;
  color: var(--accent);
  margin-bottom: 20px;
  letter-spacing: 1px;
}

.form-step { display: none; flex-direction: column; gap: 15px; }
.form-step.active { display: flex; animation: fadeIn 0.5s ease; }

label {
  font-size: 0.9rem;
  font-weight: 500;
}

input, select, textarea {
  width: 100%;
  padding: 12px 15px;
  border-radius: 12px;
  border: 1px solid var(--input-border);
  background: var(--input-bg);
  color: var(--text);
  font-size: 1rem;
  transition: all 0.3s ease;
}

input:focus, select:focus, textarea:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 12px rgba(0,191,255,0.5);
}

textarea { min-height: 60px; resize: vertical; }

.form-navigation {
  display: flex;
  justify-content: space-between;
  margin-top: 20px;
}

button {
  padding: 10px 20px;
  border-radius: 25px;
  border: none;
  cursor: pointer;
  font-weight: 600;
  background: var(--accent);
  color: #000;
  transition: all 0.3s ease;
}

button:hover { box-shadow: 0 0 15px var(--accent); transform: translateY(-2px); }

.progress-container {
  width: 100%;
  height: 6px;
  background: rgba(255,255,255,0.1);
  border-radius: 4px;
  margin-bottom: 20px;
  overflow: hidden;
}

.progress-bar {
  height: 100%;
  width: 0;
  background: var(--accent);
  border-radius: 4px;
  transition: width 0.4s ease;
}

/* =================== VALIDATION =================== */
input.valid { border-color: var(--success); box-shadow: 0 0 8px var(--success); }
input.invalid { border-color: var(--error); box-shadow: 0 0 8px var(--error); animation: shake 0.4s; }

@keyframes shake {
  0%,100%{ transform: translateX(0); }
  25%{ transform: translateX(-4px); }
  50%{ transform: translateX(4px); }
  75%{ transform: translateX(-4px); }
}

@keyframes fadeIn { from{ opacity:0; transform:translateY(20px);} to{opacity:1; transform:translateY(0);} }

/* =================== LOADING SCREEN =================== */
#loadingScreen {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.8);
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
  z-index: 2000;
}
#loadingScreen.active { opacity:1; pointer-events: all; }

.dots span {
  display: inline-block;
  width: 12px; height: 12px;
  margin: 0 6px;
  background: var(--accent);
  border-radius: 50%;
  animation: bounce 0.6s infinite alternate;
}
.dots span:nth-child(2){ animation-delay:0.2s; }
.dots span:nth-child(3){ animation-delay:0.4s; }

@keyframes bounce { from{transform:translateY(0);} to{transform:translateY(-12px);} }

/* =================== RESPONSIVE =================== */
@media (max-width: 480px) {
  .form-section { padding: 20px; }
  h2 { font-size: 1.4rem; }
  input, select, textarea { font-size: 0.9rem; padding: 10px 12px; }
  button { padding: 10px; font-size: 0.9rem; }
}

</style>
<body>
<section class="form-section">
  <h2>Formulaire d‚ÄôEnregistrement ‚Äì Femme Enceinte</h2>

  <form id="pregnancyForm">

    <!-- 1 -->
    <label>Nom complet :</label>
    <input type="text" name="nom" required>

    <!-- 2 -->
    <label>√Çge :</label>
    <input type="number" name="age" min="10" max="55" required>

    <!-- 3 -->
    <label>Date des derni√®res r√®gles (DDR) :</label>
    <input type="date" name="ddr" required>

    <!-- 4 -->
    <label>Num√©ro de t√©l√©phone :</label>
    <input type="tel" name="phone" required>

    <!-- 5 -->
    <label>Adresse compl√®te :</label>
    <input type="text" name="adresse" required>

    <!-- 6 -->
    <label>Nombre de grossesses pr√©c√©dentes :</label>
    <input type="number" name="gravite" min="0">

    <!-- 7 -->
    <label>Nombre d‚Äôenfants vivants :</label>
    <input type="number" name="parite" min="0">

    <!-- 8 -->
    <label>Ant√©c√©dents m√©dicaux :</label>
    <textarea name="antecedents" placeholder="Hypertension, diab√®te, dr√©panocytose‚Ä¶"></textarea>

    <!-- 9 -->
    <label>Allergies connues :</label>
    <textarea name="allergies"></textarea>

    <!-- 10 -->
    <label>Groupe sanguin :</label>
    <select name="groupe">
      <option value="">S√©lectionner</option>
      <option>A+</option><option>A-</option>
      <option>B+</option><option>B-</option>
      <option>AB+</option><option>AB-</option>
      <option>O+</option><option>O-</option>
    </select>

    <!-- 11 -->
    <label>Poids actuel (kg) :</label>
    <input type="number" name="poids" min="20" max="200">

    <!-- 12 -->
    <label>Taille (cm) :</label>
    <input type="number" name="taille" min="120" max="220">

    <!-- 13 -->
    <label>Pr√©sence de douleurs abdominales ?</label>
    <select name="douleurs">
      <option>Non</option>
      <option>Oui</option>
    </select>

    <!-- 14 -->
    <label>Pr√©sence de saignements ?</label>
    <select name="saignements">
      <option>Non</option>
      <option>Oui</option>
    </select>

    <!-- 15 -->
    <label>Ant√©c√©dents d‚Äôaccouchement difficile ?</label>
    <select name="accouchement_diff">
      <option>Non</option>
      <option>Oui</option>
    </select>

    <!-- 16 -->
    <label>Ant√©c√©dents de c√©sarienne ?</label>
    <select name="cesarienne">
      <option>Non</option>
      <option>Oui</option>
    </select>

    <!-- 17 -->
    <label>Tabagisme ou alcool pendant la grossesse ?</label>
    <select name="habitudes">
      <option>Non</option>
      <option>Oui</option>
    </select>

    <!-- 18 -->
    <label>Suivi pr√©natal d√©j√† en cours ?</label>
    <select name="suivi">
      <option>Non</option>
      <option>Oui</option>
    </select>

    <!-- 19 -->
    <label>M√©dicaments actuellement pris :</label>
    <textarea name="medicaments"></textarea>

    <!-- 20 -->
    <label>Remarques suppl√©mentaires :</label>
    <textarea name="notes"></textarea>


    <button type="submit" class="btn">Enregistrer</button>

  </form>
</section>

    
</body>


<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
  import {
    getFirestore,
    collection,
    addDoc,
    serverTimestamp
  } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";

  // üîπ CONFIG FIREBASE
  const firebaseConfig = {
    apiKey: "AIzaSyCqvyhUYV84Qhe8nETv0pcg1_rmDosiHJw",
    authDomain: "nala-3631c.firebaseapp.com",
    projectId: "nala-3631c",
    storageBucket: "nala-3631c.firebasestorage.app",
    messagingSenderId: "232112777960",
    appId: "1:232112777960:web:cce1dea4e9d63e28be775d"
  };

  // üîπ INIT FIREBASE
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app); // ‚úÖ MANQUANT AVANT

  // üîπ FORMULAIRE
  const form = document.getElementById("pregnancyForm");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const f = new FormData(form);

    const data = {
      nom: f.get("nom").trim(),
      age: Number(f.get("age")),
      ddr: new Date(f.get("ddr")),
      phone: f.get("phone").trim(),
      adresse: f.get("adresse").trim(),

      gravite: Number(f.get("gravite") || 0),
      parite: Number(f.get("parite") || 0),

      antecedents: f.get("antecedents").trim(),
      allergies: f.get("allergies").trim(),
      groupe: f.get("groupe"),

      poids: Number(f.get("poids") || 0),
      taille: Number(f.get("taille") || 0),

      douleurs: f.get("douleurs") === "Oui",
      saignements: f.get("saignements") === "Oui",
      accouchement_diff: f.get("accouchement_diff") === "Oui",
      cesarienne: f.get("cesarienne") === "Oui",
      habitudes: f.get("habitudes") === "Oui",
      suivi: f.get("suivi") === "Oui",

      medicaments: f.get("medicaments").trim(),
      notes: f.get("notes").trim(),

      createdAt: serverTimestamp()
    };

    try {
      await addDoc(collection(db, "grossesses"), data);
      alert("Enregistrement r√©ussi ‚úÖ");
      form.reset();
    } catch (err) {
      console.error(err);
      alert("Erreur lors de l'enregistrement ‚ùå");
    }
  });
</script>


</html>